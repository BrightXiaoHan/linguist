(()=>{"use strict";var e,t={4222:(e,t,n)=>{n.d(t,{aJ:()=>a,an:()=>o,q5:()=>l,nU:()=>i,_w:()=>u,q1:()=>c});var r=n(9416);function a(e,t){var n=function(n,r){if(n instanceof Object&&n.action===e)return t(n.data,r)};return r.browser.runtime.onMessage.addListener(n),function(){return r.browser.runtime.onMessage.removeListener(n)}}function o(e,t){return r.browser.runtime.sendMessage({action:e,data:t})}function l(e,t,n){return r.browser.tabs.sendMessage(e,{action:t,data:n})}var i=function(){return r.browser.tabs.query({currentWindow:!0,active:!0}).then((function(e){return e[0]}))},u=function(){return i().then((function(e){var t=e.id;return void 0!==t?t:Promise.reject(new Error("Invalid tab id"))}))},c=function(e,t){var n=(new Date).getTime();return new Promise((function(r,a){return o=void 0,l=void 0,u=function(){var o;return function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((a=(a=l.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}(this,(function(l){switch(l.label){case 0:o=!1,l.label=1;case 1:return o?[3,3]:[4,e().then((function(e){if("pong"!==e)throw new Error("Incorrect ping response");r(),o=!0})).catch((function(){void 0!==t&&(new Date).getTime()-n>=t&&(a(new Error("Timeout")),o=!0)}))];case 2:return l.sent(),[3,1];case 3:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{a(u.next(e))}catch(e){t(e)}}function r(e){try{a(u.throw(e))}catch(e){t(e)}}function a(t){var a;t.done?e(t.value):(a=t.value,a instanceof i?a:new i((function(e){e(a)}))).then(n,r)}a((u=u.apply(o,l||[])).next())}));var o,l,i,u}))}},660:(e,t,n)=>{var r,a=n(7294),o=n(3935),l=n(7930),i=n(4222),u=function(e){return(0,i.q1)((function(){return(0,i.an)("ping")}),e).then((function(){return!0})).catch((function(){return!1}))},c=n(3755),s=n(2281),f=n(4562),d=n(1504),p=n(7836),v=n(9245),h=n(1357),m=n(3111),b=n(8919);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const g=function(e){return a.createElement("svg",y({width:600,height:160,viewBox:"0 0 158.75 42.333",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=a.createElement("path",{d:"M144.45 7.469l5.706-3.274v7.156l3.648.047.047 4.396h-3.648l-.094 10.243c-.138 1.496.967 2.635 3.695 1.263l.328 4.163c-3.726 1.181-6.551.614-7.858-.094-1.39-.891-1.799-2.23-1.824-3.741l.047-11.693-2.386-.094v-4.49l2.433.14zM133.97 17.478l5.098-1.029c-1.051-3.632-3.408-5.27-6.829-5.285l-3.975-.094c-9.084 1.038-8.588 9.25-3.274 11.553 5.203 2.355 9.248 1.244 9.027 3.976-.79 2.388-6.899 2.56-7.858-1.357l-5.66.842c3.328 6.77 5.236 6.141 11.88 6.174 9.282-.368 10.235-11.87.843-12.862-14.581-2.286-1.499-7.253.748-1.918zM111.521 3.4h5.52l.046 5.051h-5.472zM111.521 11.164h5.613l.046 20.627h-5.706zM105.97 32.181l.14-20.627h-5.472l-.094 12.301c-.099 3.05-2.227 4.366-4.21 4.443-2.545-.113-3.384-1.58-3.32-3.367l-.187-13.33h-5.52v14.172c.096 5.519 4.228 6.785 8.467 6.641 2.443-.211 3.584-1.42 5.004-2.9l.047 2.667zM70.946 10.844c-4.59.098-9.06 4.782-8.723 10.61-.393 9.586 7.961 13.764 14.616 7.624v4.256c-1.227 3.567-6.51 3.949-7.74.561l-6.128-.842c-.675 5.137 4.066 7.399 10.337 6.97 5.31-.188 8.156-1.118 8.84-7.718V11.351l-5.309-.047v2.572c-1.696-2.173-3.807-3.076-5.893-3.032zm.747 4.691c.173 0 .352.007.54.025 3.24-.134 4.074 2.237 4.349 5.192.105 4.587-1.457 6.483-3.929 6.548-3.502.267-4.804-2.248-4.77-6.501.242-3.11 1.222-5.246 3.81-5.264zM39.492 11.304l-.14 20.627h5.472l.094-12.301c.099-3.05 2.227-4.366 4.209-4.443 2.546.113 3.385 1.58 3.32 3.367l.188 13.33h5.519V17.712c-.096-5.519-4.228-6.785-8.466-6.642-2.443.212-3.584 1.421-5.004 2.9l-.047-2.666zM28.454 3.587h5.52l.046 5.051h-5.472zM28.454 11.351h5.613l.046 20.627h-5.706zM4.646 3.727h5.847l.094 23.2 13.845.046.14 4.958-19.785-.047z"})))};var w=n(6132),T=function(){return(T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},x=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function l(e){try{u(r.next(e))}catch(e){o(e)}}function i(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}u((r=r.apply(e,t||[])).next())}))},E=function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((a=(a=l.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},C=(0,d.cn)("PopupWindow"),S=function(e){return a.createElement(m.J,{glyph:"settings",scalable:!1,className:C("HeaderIcon",[e])})},k=function(e){return a.createElement(m.J,{glyph:"dictionary",scalable:!1,style:{transform:"scale(1.5)"},className:C("HeaderIcon",[e])})},O=(0,a.createContext)({}),F=function(e){var t=e.config,n=e.translatorFeatures,r=e.error,o=e.tabs,l=e.activeTab,i=e.setActiveTab,u=e.rootElement,c=e.minWidth,s=void 0===c?450:c,d=(0,a.useRef)();(0,a.useEffect)((function(){d.current=new v.A({sizeGetter:function(e){return{height:e.scrollHeight,width:e.scrollWidth}}});var e=document.body,t=u;/firefox/i.test(navigator.userAgent)&&d.current.addHandler(t,(function(){for(var t=0;t<2;){if(e.scrollWidth>e.clientWidth){e.style.width=e.scrollWidth+"px";break}t<2&&(e.style.width=""),t++}for(var n=0;n<2;){if(e.scrollHeight>e.clientHeight){e.style.height=e.scrollHeight+"px";break}n<2&&(e.style.height=""),n++}}));var n=0;return d.current.addHandler(t,(function(){var r=t.scrollWidth;e.style.width="";var a=t.scrollWidth;n=Math.max(n,r,a),e.style.width=n+"px"})),function(){void 0!==d.current&&d.current.purgeHandlers(u)}}),[]);var m,y=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)l.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return l}((0,a.useState)(null),2),F=y[0],_=y[1],P=(0,a.useRef)({});(0,a.useEffect)((function(){var e={};P.current=e,void 0!==o&&void 0!==n&&void 0!==t&&x(void 0,void 0,void 0,(function(){var r;return E(this,(function(l){switch(l.label){case 0:return[4,Promise.all(o.map((function(e){var r=e.id,o=e.component;return x(void 0,void 0,void 0,(function(){var e,l,i;return E(this,(function(u){switch(u.label){case 0:return void 0===(e=o.init)?[3,2]:[4,e()];case 1:return i=u.sent(),[3,3];case 2:i=void 0,u.label=3;case 3:return l=i,[2,{id:r,content:a.createElement(o,T({},{translatorFeatures:n,config:t,id:r,initData:l}))}]}}))}))})))];case 1:return r=l.sent(),P.current===e&&_(r),[2]}}))}))}),[t,o,n]),m=void 0!==r?a.createElement("div",{className:C("ErrorMessage",{plainText:!0})},r):void 0!==o&&void 0!==l&&null!==F?a.createElement(a.Fragment,null,a.createElement("div",{className:C("Tabs")},a.createElement(h.l,{className:C("TabsMenu"),layout:"horizontal",size:"m",view:"motion",tabs:o.map((function(e){var t=e.id;return{id:t,content:(0,f.FC)("popup_tab_"+t)}})),activeTab:l,setActiveTab:i})),a.createElement("div",{className:C("Content")},a.createElement(O.Provider,{value:{activeTab:l}},a.createElement(p.E,{panes:F,activePane:l,renderAll:!0})))):a.createElement(b.a,{className:C("Loader")});var L=(0,a.useMemo)((function(){return{minWidth:void 0!==s?s+"px":void 0}}),[s]);return a.createElement("div",{className:C()},a.createElement("div",{className:C("Header")},a.createElement("div",{className:C("Logo")},a.createElement(g,null)),a.createElement("div",{className:C("HeaderMenu")},a.createElement(w.zx,{as:"a",type:"link",url:"/pages/dictionary/dictionary.html",target:"__blank",title:(0,f.FC)("dictionary_pageTitle"),iconRight:k,view:"clear"}),a.createElement(w.zx,{as:"a",type:"link",url:"/pages/options/options.html",target:"__blank",title:(0,f.FC)("settings_pageTitle"),iconRight:S,view:"clear"}))),a.createElement("div",{style:L},m))},_=n(4731),P=(n(6145),n(935)),L=n(86),I=n(2506),N=n(8389),M=n(6324),j=n(7869),A=n(9056),z=n(4468),R=n(9531),D=n(5604),H=n(1083),W=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)l.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return l},q=(0,d.cn)("TextTranslator"),U=function(e){var t=e.from,n=e.to,r=e.translationData,o=e.setTranslationData,l=e.translatorFeatures,i=e.setFrom,u=e.setTo,c=e.userInput,s=e.setUserInput,d=e.translateHook,p=e.spellCheck,v=e.inputControl,h=e.inputDelay,m=void 0===h?600:h,b=e.noTranslate,y=void 0!==b&&b,g=W((0,a.useState)(!1),2),w=g[0],T=g[1],x=W((0,a.useState)(null),2),E=x[0],C=x[1],S=(0,a.useRef)(Symbol("TranslateContext")),k=(0,a.useCallback)((function(){var e=S.current;d(c,t,n).then((function(t){if(e===S.current){if("string"!=typeof t){var n="["+(0,f.FC)("common_error")+": unexpected response]";throw new Error(n)}o({text:c,translate:t})}})).catch((function(t){e===S.current&&(t instanceof Error?C((0,f.FC)("common_error")+": "+t.message):C((0,f.FC)("message_unknownError")))})).finally((function(){e===S.current&&T(!1)}))}),[d,c,t,n,o]),O=(0,a.useRef)(!1),F=(0,a.useCallback)((function(){C(null),s(""),o({text:"",translate:""})}),[o,s]),_=W((0,I.k)(),2),P=_[0],L=_[1],N=(0,A.D)(y);(0,a.useEffect)((function(){if(!y&&!N)if(S.current=Symbol("TranslateContext"),0!==c.length){if(t!==n){var e=function(){T(!0),C(null),k()};O.current?(O.current=!1,L(),e()):P(e,m)}}else F()}),[t,n,c,F,P,k,m,L,y]);var M=(0,R.X)({from:t,to:n,text:c,translate:null!==E?null:r.translate}),j=M.isFavorite,U=M.toggleFavorite,B=(0,a.useCallback)((function(e){e!==j&&U()}),[j,U]),G=w?"...":null!==E?"["+E+"]":r.translate;return a.createElement("div",{className:q()},a.createElement("div",{className:q("LangPanel")},a.createElement(D.j,{auto:l.isSupportAutodetect,languages:l.supportedLanguages,from:t,to:n,setFrom:function(e){return void 0!==e&&i(e)},setTo:function(e){return void 0!==e&&u(e)},swapHandler:function(e){var t=e.from,n=e.to;S.current=Symbol("TranslateContext"),O.current=!0,i(t),u(n);var a=r.translate;s(a),o({text:a,translate:""})}})),a.createElement("div",null,a.createElement(z.X,{label:(0,f.FC)("common_action_addToDictionary"),checked:j,setChecked:B})),a.createElement("div",{className:q("InputContainer")},a.createElement("div",{className:q("InputContainerWrapper")},a.createElement(H.g,{placeholder:(0,f.FC)("textTranslator_translateInputPlaceholder"),className:q("Input"),controlProps:{innerRef:v},value:c,onChange:function(e){return s(e.target.value)},hasClear:!0,onClearClick:F,spellCheck:p}),a.createElement("div",{className:q("Result")},G.length>0?G:(0,f.FC)("textTranslator_translatePlaceholder")))))},B=function(){return(B=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},G=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)l.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return l},J=(0,P.type)({from:N.bx,to:N.vO,text:P.string,translatedText:P.string}),X=M.dt.type({resolved:M.dt.number,rejected:M.dt.number,pending:M.dt.number}),K=M.dt.type({isTranslated:M.dt.boolean,counters:X,translateDirection:M.dt.union([M.dt.type({from:M.dt.string,to:M.dt.string}),M.dt.null])}),V=function(e){return(0,i.q5)(e,"getTranslateState").then((function(e){return(0,M.bB)(K,e)}))},Y=n(6980),Q=n(2472),Z=n(2854),$=n(8354),ee=M.dt.union([M.dt.string,M.dt.null]),te=function(e){return(0,i.q5)(e,"getPageLanguage").then((function(e){return(0,M.bB)(ee,e)}))},ne=(M.dt.type({from:N.bx,to:N.vO}),(0,d.cn)("PageTranslator")),re=function(e){var t=e.translatorFeatures,n=e.from,r=e.setFrom,o=e.to,l=e.setTo,i=e.hostname,u=e.translateSite,c=e.setTranslateSite,s=e.translateLang,d=e.setTranslateLang,p=e.showCounters,v=e.toggleTranslate,h=e.isTranslated,m=e.counters,b=(0,f.FC)(h?"pageTranslator_showOriginal":"pageTranslator_translatePage"),y=(0,a.useMemo)((function(){return i.length<=50?i:i.slice(0,80)+"..."}),[i]),g=(0,a.useMemo)((function(){return(0,f.FC)("auto"===n?"lang_detect":"langCode_"+n)}),[n]);return a.createElement("div",{className:ne()},a.createElement("div",{className:ne("Direction")},a.createElement(w.zx,{view:"action",disabled:!h&&n===o,onPress:v},b)," ",a.createElement(D.j,{auto:t.isSupportAutodetect,languages:t.supportedLanguages,from:n,to:o,setFrom:r,setTo:l})),a.createElement("ul",{className:ne("List")},a.createElement("li",{className:ne("ListItem")},a.createElement(z.X,{label:(0,f.FC)("pageTranslator_alwaysTranslateSite")+" ("+y+")",checked:u,setChecked:c})),a.createElement("li",{className:ne("ListItem")},a.createElement(z.X,{label:(0,f.FC)("pageTranslator_alwaysTranslateLang")+" ("+g+")",checked:s,setChecked:d}))),p?a.createElement(a.Fragment,null,a.createElement("h4",{className:ne("Header")},(0,f.FC)("pageTranslator_translationReport")),a.createElement("div",{className:ne("CounterContainer")},a.createElement("span",{className:ne("Counter")},(0,f.FC)("pageTranslator_translationReport_resolve"),a.createElement("span",{className:ne("CounterContent")},void 0!==m?m.resolved:0)),a.createElement("span",{className:ne("Counter")},(0,f.FC)("pageTranslator_translationReport_reject"),a.createElement("span",{className:ne("CounterContent")},void 0!==m?m.rejected:0)),a.createElement("span",{className:ne("Counter")},(0,f.FC)("pageTranslator_translationReport_queue"),a.createElement("span",{className:ne("CounterContent")},void 0!==m?m.pending:0)))):void 0)},ae=function(){return(ae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},oe=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function l(e){try{u(r.next(e))}catch(e){o(e)}}function i(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}u((r=r.apply(e,t||[])).next())}))},le=function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((a=(a=l.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},ie=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)l.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return l},ue=function(e){var t=e.config,n=e.translatorFeatures,r=e.initData;if(void 0===r)throw Error("Invalid init data");var o=r.hostname,l=r.sitePrefs,u=r.autoTranslatedLangs,c=r.tabId,s=r.isTranslated,f=r.counters,d=(0,a.useRef)();d.current||(d.current={from:r.direction.from||(n.isSupportAutodetect?"auto":n.supportedLanguages[0]),to:r.direction.to||t.language});var p=ie((0,a.useState)(d.current.from),2),v=p[0],h=p[1],m=ie((0,a.useState)(d.current.to),2),b=m[0],y=m[1],g=null!==l&&l.translateAlways,w=ie((0,a.useState)(g),2),T=w[0],x=w[1],E=(0,a.useCallback)((function(e){(0,$.c)(o,{translateAlways:e}),x(e)}),[o]),C=(0,a.useRef)(u),S=ie((0,a.useState)(void 0!==v&&-1!==C.current.indexOf(v)),2),k=S[0],O=S[1];(0,a.useEffect)((function(){O(void 0!==v&&-1!==C.current.indexOf(v))}),[v]);var F=(0,a.useCallback)((function(e){O(e),void 0!==v&&oe(void 0,void 0,void 0,(function(){var t,n;return le(this,(function(r){switch(r.label){case 0:return t=C,[4,(0,Y.co)()];case 1:return t.current=r.sent(),e?-1===C.current.indexOf(v)&&(n=C.current.concat(v),(0,Q.G)(n)):(n=C.current.filter((function(e){return e!==v})),C.current.length!==n.length&&(0,Q.G)(n)),[2]}}))}))}),[v]),_=ie((0,a.useState)(s),2),P=_[0],L=_[1],I=(0,a.useCallback)((function(){void 0!==c&&void 0!==P&&void 0!==v&&void 0!==b&&(P?function(e){return(0,i.q5)(e,"untranslatePage")}(c).then((function(){return L(!1)})).catch(console.warn):function(e,t,n){return(0,i.q5)(e,"translatePage",{from:t,to:n})}(c,v,b).then((function(){return L(!0)})).catch(console.warn))}),[v,P,c,b]),N=ie((0,a.useState)(f),2),j=N[0],A=N[1];return(0,a.useEffect)((function(){var e;e=function(e,t){t===c&&A(e)},(0,i.aJ)("translateStateUpdate",(function(t,n){var r,a=(0,M.bB)(X,t);e(a,null===(r=n.tab)||void 0===r?void 0:r.id)}))}),[]),a.createElement(re,ae({translatorFeatures:n,showCounters:t.popupTab.pageTranslator.showCounters,toggleTranslate:I,counters:j,isTranslated:P},{from:v,setFrom:h,to:b,setTo:y,hostname:o,translateSite:T,setTranslateSite:E,translateLang:k,setTranslateLang:F}))};ue.init=function(){return oe(void 0,void 0,void 0,(function(){var e,t,n,r,a,o,l,u,c,s,f,d,p;return le(this,(function(v){switch(v.label){case 0:return[4,(0,i.nU)()];case 1:if(e=v.sent(),void 0===(t=e.url))throw Error("Can't get access to tab URL");return n=new URL(t),r=n.host,[4,(0,Z.If)(r)];case 2:return a=v.sent(),[4,(0,Y.co)()];case 3:return o=v.sent(),[4,(0,i._w)()];case 4:return l=v.sent(),[4,V(l)];case 5:return u=v.sent(),c=u.isTranslated,s=u.counters,f=u.translateDirection,d=null,p=null,null!==f&&(d=f.from,p=f.to),c?[3,7]:[4,te(l)];case 6:d=v.sent(),v.label=7;case 7:return[2,{hostname:r,sitePrefs:a,autoTranslatedLangs:o,tabId:l,isTranslated:c,counters:s,direction:{from:d,to:p}}]}}))}))};var ce=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)l.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return l},se=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},fe=[{id:"translateText",component:function(e){var t=e.config,n=e.translatorFeatures,r=e.id,o=(0,a.useRef)();o.current||(o.current={from:n.isSupportAutodetect?"auto":n.supportedLanguages[0],to:t.language});var l=G((0,a.useState)(o.current.from),2),i=l[0],u=l[1],c=G((0,a.useState)(o.current.to),2),s=c[0],f=c[1],d=G((0,a.useState)(""),2),p=d[0],v=d[1],h=G((0,a.useState)({translate:"",text:""}),2),m=h[0],b=h[1],y=G((0,a.useState)(!1),2),g=y[0],w=y[1];(0,a.useEffect)((function(){var e=localStorage.getItem("TextTranslator.lastState");if(null!==e)try{var r=JSON.parse(e),a=(0,M.Me)(J,r),o=n.isSupportAutodetect,l=n.supportedLanguages,i=a.from,c=a.to,s=a.text,d=a.translatedText;if(!("auto"===i&&o||-1!==l.indexOf(i)))throw new Error('Invalid property "from" in lastState');if(u(i),-1===l.indexOf(c))throw new Error('Invalid property "to" in lastState');f(c),t.textTranslator.rememberText&&s.length>0&&d.length>0&&(v(s),b({text:s,translate:d}))}catch(e){console.error(e)}w(!0)}),[]);var T=1e5,x=G((0,I.k)(),1)[0];(0,a.useEffect)((function(){x((function(){var e=m.text,n=m.translate;try{var r=t.textTranslator.rememberText&&e.length<=T&&n.length<=T&&p.length>0,a=JSON.stringify({from:i,to:s,text:r?e:"",translatedText:r?n:""});localStorage.setItem("TextTranslator.lastState",a)}catch(e){console.error(e)}}),300)}),[x,m,t.textTranslator.rememberText,p.length,i,s]);var E=(0,a.useContext)(O).activeTab,C=(0,L._Y)().isFocusVisible,S=(0,a.useRef)(null);return(0,a.useEffect)((function(){E!==r||null===S.current||C&&document.activeElement!==document.body||S.current.focus()}),[E,r]),a.createElement(U,B({translatorFeatures:n,translateHook:j.Iu,noTranslate:!1===g,spellCheck:t.textTranslator.spellCheck},{from:i,setFrom:u,to:s,setTo:f,translationData:m,setTranslationData:b,userInput:p,setUserInput:v,inputControl:S}))}}],de=[{id:"translatePage",component:ue}],pe=["translatePage","translateText"],ve=function(e){var t=e.rootElement,n=ce((0,a.useState)(),2),r=n[0],o=n[1],l=ce((0,a.useState)(),2),d=l[0],p=l[1],v=ce((0,a.useState)(),2),h=v[0],m=v[1],b=ce((0,a.useState)(),2),y=b[0],g=b[1],w=ce((0,a.useState)(),2),T=w[0],x=w[1],E=(0,a.useCallback)((function(){return void 0===r?null:"PopupPage.tabSet#"+r.map((function(e){return e.id})).sort((function(e,t){return e>t?1:t>e?-1:0})).join(";")}),[r]),C=null==h?void 0:h.popup.rememberLastTab,S=(0,a.useCallback)((function(e){if(C){var t=E();null!==t&&localStorage.setItem(t,e)}p(e)}),[C,E]);return(0,a.useEffect)((function(){var e,t,n,r,a=[];Promise.all([(200,e=void 0,t=void 0,n=void 0,r=function(){var e,t;return function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((a=(a=l.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}(this,(function(n){switch(n.label){case 0:return[3,1];case 1:return[4,(0,i._w)()];case 2:t=n.sent(),n.label=3;case 3:return e=t,[2,(0,i.q1)((function(){return(0,i.q5)(e,"ping")}),200).then((function(){return!0})).catch((function(){return!1}))]}}))},new(n||(n=Promise))((function(a,o){function l(e){try{u(r.next(e))}catch(e){o(e)}}function i(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}u((r=r.apply(e,t||[])).next())}))).then((function(e){e&&a.push.apply(a,se([],ce(de)))})),u(1e3).then((function(e){if(!e)throw new Error((0,f.FC)("common_bgUnavailable"));a.push.apply(a,se([],ce(fe))),(0,c.iE)().then(m),(0,s.OJ)().then(g)}))]).then((function(){var e=a.sort((function(e,t){return pe.indexOf(e.id)-pe.indexOf(t.id)}));o(e)})).catch((function(e){x(e instanceof Error?e.message:(0,f.FC)("message_unknownError"))}))}),[]),(0,a.useEffect)((function(){if(void 0!==r&&void 0!==h){var e=r[0].id,t=E();if(h.popup.rememberLastTab&&null!==t){var n=localStorage.getItem(t);null!==n&&-1!==r.findIndex((function(e){return e.id===n}))?S(n):S(e)}else S(e)}}),[h,E,S,r]),a.createElement(F,{rootElement:t,tabs:r,activeTab:d,setActiveTab:S,error:T,config:h,translatorFeatures:y})};function he(){var e=document.body.querySelector("#root");null!==e&&e instanceof HTMLElement&&o.render(a.createElement(ve,{rootElement:e}),e)}(0,l.g)({theme:_.r,root:document.documentElement}),"loading"==document.readyState?document.addEventListener("DOMContentLoaded",he):he()},8389:(e,t,n)=>{n.d(t,{LO:()=>o,vO:()=>l,bx:()=>i,XL:()=>u});var r=n(6324),a=n(6616),o=new r.dt.Type("ArrayOfStrings",(function(e){return Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))}),(function(e,t){return Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))?r.dt.success(e):r.dt.failure(e,t)}),r.dt.identity),l=new r.dt.Type("LangCode",(function(e){return"string"==typeof e&&a.langCodes.findIndex((function(t){return t===e}))>-1}),(function(e,t){return"string"==typeof e&&a.langCodes.findIndex((function(t){return t===e}))>-1?r.dt.success(e):r.dt.failure(e,t)}),r.dt.identity),i=new r.dt.Type("LangCodeWithAuto",(function(e){return"auto"===e||"string"==typeof e&&a.langCodes.findIndex((function(t){return t===e}))>-1}),(function(e,t){return"auto"===e||"string"==typeof e&&a.langCodes.findIndex((function(t){return t===e}))>-1?r.dt.success(e):r.dt.failure(e,t)}),r.dt.identity),u=r.dt.type({language:r.dt.string,translatorModule:r.dt.string,scheduler:r.dt.type({useCache:r.dt.boolean,translateRetryAttemptLimit:r.dt.number,isAllowDirectTranslateBadChunks:r.dt.boolean,directTranslateLength:r.dt.union([r.dt.number,r.dt.null]),translatePoolDelay:r.dt.number,chunkSizeForInstantTranslate:r.dt.union([r.dt.number,r.dt.null])}),cache:r.dt.type({ignoreCase:r.dt.boolean}),selectTranslator:r.dt.type({zIndex:r.dt.union([r.dt.number,r.dt.undefined]),focusOnTranslateButton:r.dt.union([r.dt.boolean,r.dt.undefined]),rememberDirection:r.dt.boolean,quickTranslate:r.dt.boolean,modifers:r.dt.array(r.dt.union([(0,r.uW)("ctrlKey"),(0,r.uW)("altKey"),(0,r.uW)("shiftKey"),(0,r.uW)("metaKey")])),strictSelection:r.dt.boolean,detectedLangFirst:r.dt.boolean,timeoutForHideButton:r.dt.number}),pageTranslator:r.dt.type({ignoredTags:o,translatableAttributes:o,lazyTranslate:r.dt.boolean}),textTranslator:r.dt.type({rememberText:r.dt.boolean,spellCheck:r.dt.boolean}),contentscript:r.dt.type({selectTranslator:r.dt.type({enabled:r.dt.boolean,disableWhileTranslatePage:r.dt.boolean})}),popup:r.dt.type({rememberLastTab:r.dt.boolean}),popupTab:r.dt.type({pageTranslator:r.dt.type({showCounters:r.dt.boolean})})})}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=t,e=[],r.O=(t,n,a,o)=>{if(!n){var l=1/0;for(s=0;s<e.length;s++){for(var[n,a,o]=e[s],i=!0,u=0;u<n.length;u++)(!1&o||l>=o)&&Object.keys(r.O).every((e=>r.O[e](n[u])))?n.splice(u--,1):(i=!1,o<l&&(l=o));if(i){e.splice(s--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[n,a,o]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.j=629,(()=>{var e={629:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,o,[l,i,u]=n,c=0;for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(u)var s=u(r);for(t&&t(n);c<l.length;c++)o=l[c],r.o(e,o)&&e[o]&&e[o][0](),e[l[c]]=0;return r.O(s)},n=self.webpackChunkbrowser_addon=self.webpackChunkbrowser_addon||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=r.O(void 0,[592],(()=>r(660)));a=r.O(a)})();